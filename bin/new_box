#!/usr/bin/env bash

main() {
  initial_dir=`pwd`
  cd ~
  if [ ! -d .ssh ]; then
    ssh-keygen
  fi
  setup_oh-my-zsh
  setup_vim
  setup_home
  cd $initial_dir
}

setup_oh-my-zsh() {
  git clone https://github.com:robbyrussell/oh-my-zsh.git .oh-my-zsh
  git clone https://github.com/zsh-users/zsh-syntax-highlighting.git .oh-my-zsh/custom/plugins/zsh-syntax-highlighting
}

setup_vim() {
  mkdir -pv .vim/bundle .vim/autoload .tmp
  curl -Sso .vim/autoload/pathogen.vim https://raw.github.com/tpope/vim-pathogen/master/autoload/pathogen.vim
  git clone https://github.com:bling/vim-airline.git        .vim/bundle/airline
  git clone https://github.com:kchmck/vim-coffee-script.git .vim/bundle/coffee
  git clone https://github.com:kien/ctrlp.vim.git           .vim/bundle/ctrlp
  git clone https://github.com:tpope/vim-endwise.git        .vim/bundle/endwise
  git clone https://github.com:tpope/vim-fugitive.git       .vim/bundle/fugitive
  git clone https://github.com:tpope/vim-rails.git          .vim/bundle/rails
  git clone https://github.com:tpope/vim-surround.git       .vim/bundle/surround
  git clone https://github.com:SirVer/ultisnips.git         .vim/bundle/ultisnips
}

setup_home() {
  mkdir -v projects
  cur_dir="`pwd`"
  git clone https://github.com:nwallace/dotfiles projects/dotfiles
  ln -sf $cur_dir/projects/dotfiles/.vimrc           .vimrc
  ln -sf $cur_dir/projects/dotfiles/.vim/colors      .vim/colors
  ln -sf $cur_dir/projects/dotfiles/.zshrc           .zshrc
  ln -sf $cur_dir/projects/dotfiles/.gitconfig       .gitconfig
  ln -sf $cur_dir/projects/dotfiles/nathan.zsh-theme .oh-my-zsh/themes
  ln -sf $cur_dir/projects/dotfiles/UltiSnips        .vim/UltiSnips
  ln -sf $cur_dir/projects/dotfiles/bin              bin
  ln -sf $cur_dir/projects/dotfiles/.ackrc           .ackrc
  cp projects/dotfiles/bin/setup{.example,}
}

main

